## 05. 互斥锁（上）： 一不小心就死锁了怎么办？

### 通过细粒度的锁解决转账过程中的性能问题
  
  - 示例：`Account1`
     
### 死锁产生的条件

  - 死锁示例：`DemoDealLock`
  
  - 死锁产生的条件
  
    1. 互斥，共享资源X和Y只能被一个线程占用；
    2. 占有且等待，线程T1已经取得共享资源X，在等待共享资源Y的时候，不释放共享资源X；
    3. 不可抢占，其他线程不能强行抢占线程T1占有的资源；
    4. 循环等待，线程T1等待线程T2占有的资源，线程T2等待线程T1占有的资源，就是循环等待。
     

  
### 如何预防死锁
  
  1. 破坏占用且等待条件
     
     > 示例：`Account2`
         
  2. 破坏不可抢占条件
     
         java.util.concurrent这个包下面提供的Lock是可以轻松解决这个问题
        
  3. 破坏循环等待条件
     
     > 示例：`Account3`


